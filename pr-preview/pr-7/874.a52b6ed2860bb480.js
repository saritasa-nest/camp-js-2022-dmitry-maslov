"use strict";(self.webpackChunkangular=self.webpackChunkangular||[]).push([[874],{1874:(Ve,K,r)=>{r.r(K),r.d(K,{AnimeModule:()=>Oe});var p=r(8692),C=r(2864),t=r(4537),I=r(8023),h=r(4121),D=r(4945),R=r(7241),E=r(5975),W=r(2692);function q(e,i,n){return n?q(e,i).pipe((0,W.Z)(n)):new R.y(a=>{const o=(...l)=>a.next(1===l.length?l[0]:l),s=e(o);return(0,E.m)(i)?()=>i(o,s):void 0})}var _=r(5696),Q=r(7824),ht=r(1860),tt=r(5598),F=r(1927),Z=r(8168),O=r(3528),ft=r(561),yt=r(985),L=r(2085);const vt={connector:()=>new I.x};function et(e,i=vt){const{connector:n}=i;return(0,L.e)((a,o)=>{const s=n();(0,yt.D)(e(function _t(e){return new R.y(i=>e.subscribe(i))}(s))).subscribe(o),o.add(a.subscribe(s))})}var nt=r(1528),bt=r(4882),V=r(8499),St=r(5955),Pt=r(8330),xt=r(408),it=r(6651);function J(...e){const i=(0,it.jO)(e);return(0,L.e)((n,a)=>{const o=e.length,s=new Array(o);let l=e.map(()=>!1),m=!1;for(let u=0;u<o;u++)(0,St.Xf)(e[u]).subscribe(new V.Q(a,y=>{s[u]=y,!m&&!l[u]&&(l[u]=!0,(m=l.every(Pt.y))&&(l=null))},xt.Z));n.subscribe(new V.Q(a,u=>{if(m){const y=[u,...s];a.next(i?i(...y):y)}}))})}var v=r(7969),Ct=r(7479),It=r(2147),Dt=r(697);function at(...e){const i=(0,it.jO)(e);return i?(0,Q.z)(at(...e),(0,W.Z)(i)):(0,L.e)((n,a)=>{(0,_.l)([n,...(0,Dt.k)(e)])(a)})}var wt=r(4970);const Ut=["youtubeContainer"];let st=(()=>{class e{constructor(n,a){this._ngZone=n,this._youtubeContainer=new I.x,this._destroyed=new I.x,this._playerChanges=new h.X(void 0),this._videoId=new h.X(void 0),this._height=new h.X(390),this._width=new h.X(640),this._startSeconds=new h.X(void 0),this._endSeconds=new h.X(void 0),this._suggestedQuality=new h.X(void 0),this._playerVars=new h.X(void 0),this.ready=this._getLazyEmitter("onReady"),this.stateChange=this._getLazyEmitter("onStateChange"),this.error=this._getLazyEmitter("onError"),this.apiChange=this._getLazyEmitter("onApiChange"),this.playbackQualityChange=this._getLazyEmitter("onPlaybackQualityChange"),this.playbackRateChange=this._getLazyEmitter("onPlaybackRateChange"),this._isBrowser=(0,p.NF)(a)}get videoId(){return this._videoId.value}set videoId(n){this._videoId.next(n)}get height(){return this._height.value}set height(n){this._height.next(n||390)}get width(){return this._width.value}set width(n){this._width.next(n||640)}set startSeconds(n){this._startSeconds.next(n)}set endSeconds(n){this._endSeconds.next(n)}set suggestedQuality(n){this._suggestedQuality.next(n)}get playerVars(){return this._playerVars.value}set playerVars(n){this._playerVars.next(n)}ngOnInit(){if(!this._isBrowser)return;let n=(0,D.of)(!0);if(!window.YT||!window.YT.Player){const o=new I.x;this._existingApiReadyCallback=window.onYouTubeIframeAPIReady,window.onYouTubeIframeAPIReady=()=>{this._existingApiReadyCallback&&this._existingApiReadyCallback(),this._ngZone.run(()=>o.next(!0))},n=o.pipe((0,tt.q)(1),(0,F.O)(!1))}const a=function Mt(e,i,n,a,o,s,l){const m=(0,_.a)([i,s]).pipe(J((0,_.a)([a,o])),(0,v.U)(([u,y])=>{const[d,g]=u,[x,H]=y;return d?{videoId:d,playerVars:g,width:x,height:H}:void 0}));return(0,_.a)([e,m,(0,D.of)(l)]).pipe(function Nt(e){return(0,Q.z)(at(e),function Zt(e){return(0,L.e)((i,n)=>{let a=!1,o=0;i.subscribe(new V.Q(n,s=>(a||(a=!e(s,o++)))&&n.next(s)))})}(([i,n])=>!n),(0,v.U)(([i])=>i))}(n),(0,Ct.R)(Et,void 0),(0,It.x)())}(this._youtubeContainer,this._videoId,n,this._width,this._height,this._playerVars,this._ngZone).pipe((0,Z.b)(o=>{this._playerChanges.next(o)}),function Lt(e){return(0,bt.z)(i=>i?lt(i)?(0,D.of)(i):new R.y(n=>{let a=!1,o=!1;const s=l=>{o=!0,a||(l.target.removeEventListener("onReady",s),n.next(l.target))};return i.addEventListener("onReady",s),()=>{a=!0,o||e(i)}}).pipe((0,tt.q)(1),(0,F.O)(void 0)):(0,D.of)(void 0))}(o=>{lt(o)||o.destroy()}),(0,O.R)(this._destroyed),function At(e){return e?i=>et(e)(i):i=>function Tt(e,i){const n=(0,E.m)(e)?e:()=>e;return(0,E.m)(i)?et(i,{connector:n}):a=>new ft.c(a,n)}(new I.x)(i)}());a.subscribe(o=>{this._player=o,o&&this._pendingPlayerState&&this._initializePlayer(o,this._pendingPlayerState),this._pendingPlayerState=void 0}),function Yt(e,i,n){(0,_.a)([e,i,n]).subscribe(([a,o,s])=>a&&a.setSize(o,s))}(a,this._width,this._height),function Rt(e,i){(0,_.a)([e,i]).subscribe(([n,a])=>n&&a&&n.setPlaybackQuality(a))}(a,this._suggestedQuality),function Qt(e,i,n,a,o,s){const l=(0,_.a)([n,a]).pipe((0,v.U)(([d,g])=>({startSeconds:d,endSeconds:g}))),m=l.pipe(B(e,d=>!!d&&!function Ft(e){const i=e.getPlayerState();return i!==YT.PlayerState.UNSTARTED&&i!==YT.PlayerState.CUED}(d))),u=i.pipe(B(e,(d,g)=>!!d&&d.videoId!==g)),y=e.pipe(B((0,_.a)([i,l]),([d,g],x)=>!(!x||d==x.videoId&&!g.startSeconds&&!g.endSeconds)));(0,ht.T)(y,u,m).pipe(J((0,_.a)([e,i,l,o])),(0,v.U)(([d,g])=>g),(0,O.R)(s)).subscribe(([d,g,x,H])=>{!g||!d||(d.videoId=g,d.cueVideoById({videoId:g,suggestedQuality:H,...x}))})}(a,this._videoId,this._startSeconds,this._endSeconds,this._suggestedQuality,this._destroyed),a.connect()}ngAfterViewInit(){this._youtubeContainer.next(this.youtubeContainer.nativeElement)}ngOnDestroy(){this._player&&(this._player.destroy(),window.onYouTubeIframeAPIReady=this._existingApiReadyCallback),this._playerChanges.complete(),this._videoId.complete(),this._height.complete(),this._width.complete(),this._startSeconds.complete(),this._endSeconds.complete(),this._suggestedQuality.complete(),this._youtubeContainer.complete(),this._playerVars.complete(),this._destroyed.next(),this._destroyed.complete()}playVideo(){this._player?this._player.playVideo():this._getPendingState().playbackState=YT.PlayerState.PLAYING}pauseVideo(){this._player?this._player.pauseVideo():this._getPendingState().playbackState=YT.PlayerState.PAUSED}stopVideo(){this._player?this._player.stopVideo():this._getPendingState().playbackState=YT.PlayerState.CUED}seekTo(n,a){this._player?this._player.seekTo(n,a):this._getPendingState().seek={seconds:n,allowSeekAhead:a}}mute(){this._player?this._player.mute():this._getPendingState().muted=!0}unMute(){this._player?this._player.unMute():this._getPendingState().muted=!1}isMuted(){return this._player?this._player.isMuted():!!this._pendingPlayerState&&!!this._pendingPlayerState.muted}setVolume(n){this._player?this._player.setVolume(n):this._getPendingState().volume=n}getVolume(){return this._player?this._player.getVolume():this._pendingPlayerState&&null!=this._pendingPlayerState.volume?this._pendingPlayerState.volume:0}setPlaybackRate(n){if(this._player)return this._player.setPlaybackRate(n);this._getPendingState().playbackRate=n}getPlaybackRate(){return this._player?this._player.getPlaybackRate():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackRate?this._pendingPlayerState.playbackRate:0}getAvailablePlaybackRates(){return this._player?this._player.getAvailablePlaybackRates():[]}getVideoLoadedFraction(){return this._player?this._player.getVideoLoadedFraction():0}getPlayerState(){if(this._isBrowser&&window.YT)return this._player?this._player.getPlayerState():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackState?this._pendingPlayerState.playbackState:YT.PlayerState.UNSTARTED}getCurrentTime(){return this._player?this._player.getCurrentTime():this._pendingPlayerState&&this._pendingPlayerState.seek?this._pendingPlayerState.seek.seconds:0}getPlaybackQuality(){return this._player?this._player.getPlaybackQuality():"default"}getAvailableQualityLevels(){return this._player?this._player.getAvailableQualityLevels():[]}getDuration(){return this._player?this._player.getDuration():0}getVideoUrl(){return this._player?this._player.getVideoUrl():""}getVideoEmbedCode(){return this._player?this._player.getVideoEmbedCode():""}_getPendingState(){return this._pendingPlayerState||(this._pendingPlayerState={}),this._pendingPlayerState}_initializePlayer(n,a){const{playbackState:o,playbackRate:s,volume:l,muted:m,seek:u}=a;switch(o){case YT.PlayerState.PLAYING:n.playVideo();break;case YT.PlayerState.PAUSED:n.pauseVideo();break;case YT.PlayerState.CUED:n.stopVideo()}null!=s&&n.setPlaybackRate(s),null!=l&&n.setVolume(l),null!=m&&(m?n.mute():n.unMute()),null!=u&&n.seekTo(u.seconds,u.allowSeekAhead)}_getLazyEmitter(n){return this._playerChanges.pipe((0,nt.w)(a=>a?q(o=>{a.addEventListener(n,o)},o=>{try{a.removeEventListener&&a.removeEventListener(n,o)}catch{}}):(0,D.of)()),a=>new R.y(o=>a.subscribe({next:s=>this._ngZone.run(()=>o.next(s)),error:s=>o.error(s),complete:()=>o.complete()})),(0,O.R)(this._destroyed))}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(t.R0b),t.Y36(t.Lbi))},e.\u0275cmp=t.Xpm({type:e,selectors:[["youtube-player"]],viewQuery:function(n,a){if(1&n&&t.Gf(Ut,5),2&n){let o;t.iGM(o=t.CRH())&&(a.youtubeContainer=o.first)}},inputs:{videoId:"videoId",height:"height",width:"width",startSeconds:"startSeconds",endSeconds:"endSeconds",suggestedQuality:"suggestedQuality",playerVars:"playerVars",showBeforeIframeApiLoads:"showBeforeIframeApiLoads"},outputs:{ready:"ready",stateChange:"stateChange",error:"error",apiChange:"apiChange",playbackQualityChange:"playbackQualityChange",playbackRateChange:"playbackRateChange"},decls:2,vars:0,consts:[["youtubeContainer",""]],template:function(n,a){1&n&&t._UZ(0,"div",null,0)},encapsulation:2,changeDetection:0}),e})();function Et(e,[i,n,a]){if(e&&n&&e.playerVars!==n.playerVars)e.destroy();else{if(!n)return void(e&&e.destroy());if(e)return e}const o=a.runOutsideAngular(()=>new YT.Player(i,n));return o.videoId=n.videoId,o.playerVars=n.playerVars,o}function lt(e){return"getPlayerStatus"in e}function B(e,i){return(0,Q.z)(J(e),(0,wt.h)(([n,a])=>i(a,n)),(0,v.U)(([n])=>n))}let Ot=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({}),e})();var Vt=r(2355),ct=r(9676),Jt=r(4325);let Bt=(()=>{class e{constructor(n,a){this.userService=n,this.router=a}canActivate(n,a){return this.canNavigate(a)}canNavigate(n){return this.userService.isAuthorized$.pipe((0,v.U)(a=>!!a||(this.userService.setReturnUrl(n.url),this.router.parseUrl("auth"))),(0,ct.P)())}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(Jt.K),t.LFG(C.F0))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var $t=r(3101),zt=r(4762),c=(()=>{return(e=c||(c={})).TV="TV",e.OVA="OVA",e.Movie="MOVIE",e.Special="SPECIAL",e.ONA="ONA",e.Music="MUSIC",e.Unknown="UNKNOWN",c;var e})();!function(e){const i={[e.TV]:"TV",[e.OVA]:"OVA",[e.Movie]:"Movie",[e.Special]:"Special",[e.ONA]:"ONA",[e.Music]:"Music",[e.Unknown]:"Unknown"};e.toReadable=function n(s){return i[s]},e.toAnimeType=function a(s){return i[s]?s:e.Unknown},e.fromReadableToAnimeType=function o(s){for(const l in i)if(s===i[l])return l;return e.Unknown}}(c||(c={}));var A=(()=>{return(e=A||(A={})).Airing="AIRING",e.Finished="FINISHED",e.NotYetAired="NOT_YET_AIRED",e.Unknown="unknown",A;var e})();!function(e){const i={[e.Airing]:"Airing",[e.Finished]:"Finished",[e.NotYetAired]:"Not yet aired",[e.Unknown]:"Unknown"};e.toReadable=function n(o){return i[o]},e.toAnimeStatus=function a(o){return i[o]?o:e.Unknown}}(A||(A={}));var M=(()=>{return(e=M||(M={})).Id="id",e.TitleEng="title_eng",e.TitleJpn="title_jpn",e.Synopsis="synopsis",e.Status="status",e.Source="source",e.Rating="rating",e.Aired="aired",e.AiredStart="aired__startswith",e.AiredEnd="aired__endswith",e.Created="created",e.Modified="modified",M;var e})();const dt="MMM yyyy";var $,z,k,N,j,G,X,kt=r(1588),jt=r(3151),ut=r(8609),b=r(92),w=r(8635);class Gt extends w.o{constructor(i){super(),this.items=i.items,this.total=i.total}}($||($={})).fromDto=function i({dto:n,resultMapper:a}){return new Gt({total:n.count,items:n.results.map(o=>a(o))})};class Xt extends w.o{constructor(i){super(),this.id=i.id,this.image=i.image,this.titleEng=i.titleEng,this.titleJpn=i.titleJpn,this.airedStart=i.airedStart,this.type=i.type,this.status=i.status}}class Ht extends w.o{constructor(i){super(),this.id=i.id,this.airing=i.airing,this.image=i.image,this.titleEng=i.titleEng,this.titleJpn=i.titleJpn,this.airedRange=i.airedRange,this.type=i.type,this.status=i.status,this.synopsis=i.synopsis,this.genres=i.genres,this.studios=i.studios,this.youTubeTrailerId=i.youTubeTrailerId}}class Kt extends w.o{constructor(i){super(),this.id=i.id,this.name=i.name}}(z||(z={})).fromDto=function i(n){return new Kt({id:n.id,name:n.name})};class Wt extends w.o{constructor(i){super(),this.id=i.id,this.name=i.name}}!function(e){e.fromDto=function i(n){return new Wt({id:n.id,name:n.name})}}(k||(k={})),function(e){e.fromDtoToAnimeBase=function i(a){return new Xt({id:a.id,image:a.image,titleEng:a.title_eng,titleJpn:a.title_jpn,airedStart:null===a.aired.start?null:new Date(a.aired.start),type:c.toAnimeType(a.type),status:a.status})},e.fromDtoToAnime=function n(a){return new Ht({airing:a.airing,id:a.id,image:a.image,titleEng:a.title_eng,titleJpn:a.title_jpn,airedRange:{airedStart:null===a.aired.start?null:new Date(a.aired.start),airedFinish:null===a.aired.end?null:new Date(a.aired.end)},type:c.toAnimeType(a.type),status:a.status,synopsis:a.synopsis,studios:a.studios_data.map(o=>z.fromDto(o)),genres:a.genres_data.map(o=>k.fromDto(o)),youTubeTrailerId:a.trailer_youtube_id})}}(N||(N={})),function(e){e.toDto=function i(n){return{limit:n.limit,offset:n.page*n.limit-n.limit}}}(j||(j={})),function(e){e.filterTypeToDto=function i(n){return`${n.join(",")}`}}(G||(G={})),function(e){e.toDto=function i(n){return""===n.direction?"id":"desc"===n.direction?`-${n.sortBy}`:n.sortBy}}(X||(X={}));var qt=r(5893),te=r(5732);let mt=(()=>{class e{constructor(n,a){this.httpClient=a,this.animeUrl=new URL("anime/anime/",n.apiUrl)}getAnime(n){return this.httpClient.get(`${this.animeUrl.toString()}${n}/`).pipe((0,v.U)(a=>N.fromDtoToAnime(a)))}getPaginatedAnimeList({sortParams:n,paginationParams:a,filterParams:o}){const{offset:s,limit:l}=j.toDto(a);return this.httpClient.get(this.animeUrl.toString(),{params:{[U.offset]:s,[U.limit]:l,[U.order]:X.toDto(n),[U.search]:o.search,[U.typeIn]:G.filterTypeToDto(o.type)}}).pipe((0,v.U)(m=>$.fromDto({dto:m,resultMapper:N.fromDtoToAnimeBase})))}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(qt._),t.LFG(te.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const U={offset:"offset",limit:"limit",order:"ordering",search:"search",typeIn:"type__in"};var pt=r(8659),ee=r(8033),ne=r(1379),T=r(317),ie=r(2080),ae=r(827),gt=r(6558),oe=r(9665);function re(e,i){1&e&&t._UZ(0,"mat-progress-bar",2)}function se(e,i){if(1&e&&(t.TgZ(0,"mat-option",9),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.Q6J("value",n.key),t.xp6(1),t.hij(" ",n.value," ")}}function le(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"mat-paginator",10),t.NdJ("page",function(o){t.CHM(n);const s=t.oxw(2);return t.KtG(s.handlePaginationChange(o))}),t.ALo(1,"async"),t.qZA()}if(2&e){const n=i.ngIf,a=t.oxw().ngIf,o=t.oxw();t.Q6J("length",a.total)("pageSizeOptions",o.pageSizeOptions)("pageSize",t.lcZ(1,4,o.paginationLimit$))("pageIndex",n-1)}}function ce(e,i){1&e&&(t.TgZ(0,"th",23),t._uU(1,"Image"),t.qZA())}function de(e,i){if(1&e&&(t.TgZ(0,"td",24),t._UZ(1,"img",25),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.Q6J("src",n.image,t.LSH)}}function ue(e,i){if(1&e&&(t.TgZ(0,"th",26),t._uU(1," Eng Title "),t.qZA()),2&e){const n=t.oxw(3);t.Q6J("mat-sort-header",n.sortedFields.TitleEng)}}function me(e,i){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.Oqu(n.titleEng)}}function pe(e,i){1&e&&(t.TgZ(0,"th",23),t._uU(1,"Jpn Title"),t.qZA())}function ge(e,i){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.Oqu(n.titleJpn)}}function he(e,i){if(1&e&&(t.TgZ(0,"th",26),t._uU(1," Aired start "),t.qZA()),2&e){const n=t.oxw(3);t.Q6J("mat-sort-header",n.sortedFields.AiredStart)}}function fe(e,i){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const n=i.$implicit,a=t.oxw(3);t.xp6(1),t.hij(" ",t.xi3(2,1,n.airedStart,a.monthYearFormat)||"Not started"," ")}}function ye(e,i){1&e&&(t.TgZ(0,"th",23),t._uU(1,"Type"),t.qZA())}function _e(e,i){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){const n=i.$implicit,a=t.oxw(3);t.xp6(1),t.hij(" ",a.animeType.toReadable(n.type)," ")}}function ve(e,i){if(1&e&&(t.TgZ(0,"th",26),t._uU(1," Status "),t.qZA()),2&e){const n=t.oxw(3);t.Q6J("mat-sort-header",n.sortedFields.Status)}}function Te(e,i){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){const n=i.$implicit,a=t.oxw(3);t.xp6(1),t.hij(" ",a.animeStatus.toReadable(n.status)," ")}}function Ae(e,i){1&e&&t._UZ(0,"tr",27)}function be(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"tr",28),t.NdJ("click",function(){const s=t.CHM(n).$implicit,l=t.oxw(3);return t.KtG(l.openDetails(s.id))}),t.qZA()}}function Se(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"table",11),t.NdJ("matSortChange",function(o){t.CHM(n);const s=t.oxw(2);return t.KtG(s.handleSortChange(o))}),t.ynx(1,12),t.YNc(2,ce,2,0,"th",13),t.YNc(3,de,2,1,"td",14),t.BQk(),t.ynx(4,15),t.YNc(5,ue,2,1,"th",16),t.YNc(6,me,2,1,"td",14),t.BQk(),t.ynx(7,17),t.YNc(8,pe,2,0,"th",13),t.YNc(9,ge,2,1,"td",14),t.BQk(),t.ynx(10,18),t.YNc(11,he,2,1,"th",16),t.YNc(12,fe,3,4,"td",14),t.BQk(),t.ynx(13,19),t.YNc(14,ye,2,0,"th",13),t.YNc(15,_e,2,1,"td",14),t.BQk(),t.ynx(16,20),t.YNc(17,ve,2,1,"th",16),t.YNc(18,Te,2,1,"td",14),t.BQk(),t.YNc(19,Ae,1,0,"tr",21),t.YNc(20,be,1,0,"tr",22),t.qZA()}if(2&e){const n=i.ngIf,a=t.oxw().ngIf,o=t.oxw();t.Q6J("dataSource",a.items)("trackBy",o.trackById)("matSortDirection",n.direction)("matSortActive",n.sortBy),t.xp6(19),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns)}}function Pe(e,i){if(1&e&&(t.TgZ(0,"div")(1,"form",3)(2,"mat-form-field")(3,"mat-label"),t._uU(4,"Search"),t.qZA(),t._UZ(5,"input",4),t.qZA(),t.TgZ(6,"mat-form-field")(7,"mat-label"),t._uU(8,"Filter type"),t.qZA(),t.TgZ(9,"mat-select",5),t.YNc(10,se,2,2,"mat-option",6),t.ALo(11,"keyvalue"),t.qZA()()(),t.YNc(12,le,2,6,"mat-paginator",7),t.ALo(13,"async"),t.YNc(14,Se,21,6,"table",8),t.ALo(15,"async"),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("formGroup",n.filterForms),t.xp6(8),t.Q6J("multiple",!0),t.xp6(1),t.Q6J("ngForOf",t.lcZ(11,5,n.filterOptionsMap.type)),t.xp6(2),t.Q6J("ngIf",t.lcZ(13,7,n.paginationPage$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(15,9,n.sortParams$))}}const P_paginationParams_page=1,P_paginationParams_limit=10,P_sortParams_direction="",P_sortParams_sortBy="";let S=class{constructor(i,n,a,o){this.formBuilder=i,this.router=n,this.route=a,this.monthYearFormat=dt,this.animeType=c,this.animeStatus=A,this.isLoading$=new h.X(!0),this.sortedFields=M,this.pageSizeOptions=[5,10,15,20],this.displayedColumns=["image","titleEng","titleJpn","airedStart","type","status"],this.filterOptionsMap={type:{[c.Movie]:c.toReadable(c.Movie),[c.TV]:c.toReadable(c.TV),[c.OVA]:c.toReadable(c.OVA),[c.ONA]:c.toReadable(c.ONA),[c.Special]:c.toReadable(c.Special),[c.Music]:c.toReadable(c.Music),[c.Unknown]:c.toReadable(c.Unknown)}},this.paginationLimit$=new h.X(P_paginationParams_limit),this.paginationPage$=new h.X(P_paginationParams_page),this.sortParams$=new h.X({direction:"",sortBy:""}),this.filterForms=this.formBuilder.nonNullable.group({search:"",type:[]}),this.setInitialParams();const s=this.filterForms.valueChanges.pipe((0,Z.b)(()=>this.resetPagination()),(0,kt.T)(1),(0,F.O)(this.filterForms.value),(0,v.U)(({search:l,type:m})=>({search:l??"",type:m??[]})));this.paginatedAnimeList$=(0,_.a)([this.paginationPage$,this.paginationLimit$,this.sortParams$,s]).pipe((0,jt.b)(300),(0,Z.b)(()=>this.isLoading$.next(!0)),(0,nt.w)(([l,m,u,y])=>{const d={page:l,limit:m};return this.updateQueryParams({paginationParams:d,filterParams:y,sortParams:u}),o.getPaginatedAnimeList({paginationParams:d,sortParams:u,filterParams:y}).pipe((0,Z.b)(()=>this.isLoading$.next(!1)))}))}openDetails(i){this.router.navigate([`anime/${i}`],{})}handleSortChange(i){this.sortParams$.next({direction:i.direction,sortBy:i.active}),this.resetPagination()}handlePaginationChange(i){this.paginationLimit$.next(i.pageSize),this.paginationPage$.next(i.pageIndex+1)}trackById(i,n){return n.id}resetPagination(){this.paginationPage$.next(1)}updateQueryParams({paginationParams:i,filterParams:n,sortParams:a}){this.router.navigate([],{queryParams:{limit:i.limit,page:i.page,search:n.search??null,sortBy:a.direction?a.sortBy:null,direction:a.direction??null,type:n.type.map(o=>c.toReadable(o))??null},queryParamsHandling:"merge"})}getSortParamsFromQuery(i){return{direction:i.direction??P_sortParams_direction,sortBy:i.sortBy??P_sortParams_sortBy}}getPaginationParamsFromQuery(i){return{limit:i.limit??P_paginationParams_limit,page:i.page??P_paginationParams_page}}getFilterParamsFromQuery(i){const n=i.type,a=[];return"string"==typeof n?a.push(c.fromReadableToAnimeType(n)):n instanceof Array&&n.forEach(o=>a.push(c.fromReadableToAnimeType(o))),{search:i.search??"",type:a}}setInitialParams(){this.route.queryParams.pipe((0,ct.P)(),(0,Z.b)(i=>{this.setInitialParamsFromQuery(i)}),(0,ut.t)(this)).subscribe()}setInitialParamsFromQuery(i){const n=this.getPaginationParamsFromQuery(i);this.paginationPage$.next(n.page),this.paginationLimit$.next(n.limit),this.sortParams$.next(this.getSortParamsFromQuery(i)),this.filterForms.setValue(this.getFilterParamsFromQuery(i))}};S.\u0275fac=function(i){return new(i||S)(t.Y36(b.qu),t.Y36(C.F0),t.Y36(C.gz),t.Y36(mt))},S.\u0275cmp=t.Xpm({type:S,selectors:[["camp-anime-table"]],decls:4,vars:6,consts:[["mode","indeterminate",4,"ngIf"],[4,"ngIf"],["mode","indeterminate"],[3,"formGroup"],["matInput","","placeholder","Naruto","formControlName","search"],["formControlName","type",3,"multiple"],[3,"value",4,"ngFor","ngForOf"],["showFirstLastButtons","","aria-label","Pagination panel",3,"length","pageSizeOptions","pageSize","pageIndex","page",4,"ngIf"],["mat-table","","class","table mat-elevation-z8","aria-label","Anime Table","matSort","",3,"dataSource","trackBy","matSortDirection","matSortActive","matSortChange",4,"ngIf"],[3,"value"],["showFirstLastButtons","","aria-label","Pagination panel",3,"length","pageSizeOptions","pageSize","pageIndex","page"],["mat-table","","aria-label","Anime Table","matSort","",1,"table","mat-elevation-z8",3,"dataSource","trackBy","matSortDirection","matSortActive","matSortChange"],["matColumnDef","image"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","titleEng"],["mat-header-cell","",3,"mat-sort-header",4,"matHeaderCellDef"],["matColumnDef","titleJpn"],["matColumnDef","airedStart"],["matColumnDef","type"],["matColumnDef","status"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["alt","",1,"anime-image",3,"src"],["mat-header-cell","",3,"mat-sort-header"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(i,n){1&i&&(t.YNc(0,re,1,0,"mat-progress-bar",0),t.ALo(1,"async"),t.YNc(2,Pe,16,11,"div",1),t.ALo(3,"async")),2&i&&(t.Q6J("ngIf",t.lcZ(1,2,n.isLoading$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(3,4,n.paginatedAnimeList$)))},dependencies:[p.sg,p.O5,b._Y,b.Fj,b.JJ,b.JL,b.sg,b.u,pt.KE,pt.hX,ee.gD,ne.ey,T.BZ,T.fO,T.as,T.w1,T.Dz,T.nj,T.ge,T.ev,T.XQ,T.Gk,ie.NW,ae.pW,gt.YE,gt.nU,oe.Nt,p.Ov,p.uU,p.Nd],styles:[".table[_ngcontent-%COMP%]{width:100%}.anime-image[_ngcontent-%COMP%]{max-width:150px;max-height:150px}"],changeDetection:0}),S=(0,zt.gn)([(0,ut.V)()],S);let Ce=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["camp-anime-list-page"]],decls:1,vars:0,consts:[[1,"anime-table"]],template:function(n,a){1&n&&t._UZ(0,"camp-anime-table",0)},dependencies:[S],styles:["[_nghost-%COMP%]{display:block}.anime-table[_ngcontent-%COMP%]{padding:0 40px}"],changeDetection:0}),e})(),Ie=(()=>{class e{constructor(n){this.document=n}initYouTubePlayer(){void 0===this.youTubeApiTag&&(this.youTubeApiTag=document.createElement("script"),this.youTubeApiTag.src="https://www.youtube.com/iframe_api",this.document.body.appendChild(this.youTubeApiTag))}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(p.K0))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Y=r(1997);function De(e,i){if(1&e&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const n=t.oxw().ngIf,a=t.oxw();t.xp6(1),t.hij(" Start: ",t.xi3(2,1,n.airedRange.airedStart,a.monthYearFormat)," ")}}function Ze(e,i){if(1&e&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const n=t.oxw().ngIf,a=t.oxw();t.xp6(1),t.hij(" Finish: ",t.xi3(2,1,n.airedRange.airedFinish,a.monthYearFormat)," ")}}function we(e,i){if(1&e&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",n.name," ")}}function Ue(e,i){if(1&e&&(t.TgZ(0,"mat-card-content")(1,"div",5),t._uU(2,"Studios"),t.qZA(),t.YNc(3,we,2,1,"div",8),t.qZA()),2&e){const n=t.oxw().ngIf;t.xp6(3),t.Q6J("ngForOf",n.studios)}}function Ye(e,i){if(1&e&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",n.name," ")}}function Re(e,i){if(1&e&&(t.TgZ(0,"mat-card-content")(1,"div",5),t._uU(2,"Genres"),t.qZA(),t.YNc(3,Ye,2,1,"div",8),t.qZA()),2&e){const n=t.oxw().ngIf;t.xp6(3),t.Q6J("ngForOf",n.genres)}}function Le(e,i){1&e&&(t.TgZ(0,"div",5),t._uU(1,"Synopsis"),t.qZA())}function Me(e,i){if(1&e&&(t.TgZ(0,"mat-card-content")(1,"div",5),t._uU(2,"Trailer"),t.qZA(),t.TgZ(3,"div",9),t._UZ(4,"youtube-player",10),t.qZA()()),2&e){const n=t.oxw().ngIf;t.xp6(4),t.Q6J("videoId",n.youTubeTrailerId)("height",400)("width",800)}}function Ne(e,i){if(1&e&&(t.TgZ(0,"mat-card",1)(1,"mat-card-title-group")(2,"mat-card-title"),t._uU(3),t.qZA(),t.TgZ(4,"mat-card-subtitle"),t._uU(5),t.qZA()(),t.TgZ(6,"div",2),t._UZ(7,"img",3),t.TgZ(8,"div",4)(9,"mat-card-content")(10,"div",5),t._uU(11,"Type"),t.qZA(),t._uU(12),t.qZA(),t.TgZ(13,"mat-card-content")(14,"div",5),t._uU(15,"Aired:"),t.qZA(),t.TgZ(16,"div"),t._uU(17),t.qZA(),t.YNc(18,De,3,4,"div",6),t.YNc(19,Ze,3,4,"div",6),t.qZA(),t.YNc(20,Ue,4,1,"mat-card-content",6),t.YNc(21,Re,4,1,"mat-card-content",6),t.qZA()(),t.TgZ(22,"mat-card-content"),t.YNc(23,Le,2,0,"div",7),t._uU(24),t.qZA(),t.YNc(25,Me,5,3,"mat-card-content",6),t.qZA()),2&e){const n=i.ngIf,a=t.oxw();t.xp6(3),t.hij(" ",n.titleEng," "),t.xp6(2),t.hij(" ",n.titleJpn," "),t.xp6(2),t.Q6J("src",n.image,t.LSH)("alt","Poster anime - "+n.titleEng),t.xp6(5),t.hij(" ",a.animeType.toReadable(n.type)," "),t.xp6(5),t.hij("Status: ",a.animeStatus.toReadable(n.status),""),t.xp6(1),t.Q6J("ngIf",n.airedRange.airedStart),t.xp6(1),t.Q6J("ngIf",n.airedRange.airedFinish),t.xp6(1),t.Q6J("ngIf",n.studios[0]),t.xp6(1),t.Q6J("ngIf",n.genres[0]),t.xp6(2),t.Q6J("ngIf",n.synopsis),t.xp6(1),t.hij(" ",n.synopsis," "),t.xp6(1),t.Q6J("ngIf",n.youTubeTrailerId)}}let Ee=(()=>{class e{constructor(n,a){this.animeService=n,this.youTubePlayerService=a,this.monthYearFormat=dt,this.animeStatus=A,this.animeType=c}ngOnInit(){this.anime$=this.animeService.getAnime(this.animeId),this.youTubePlayerService.initYouTubePlayer()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(mt),t.Y36(Ie))},e.\u0275cmp=t.Xpm({type:e,selectors:[["camp-anime-details"]],inputs:{animeId:"animeId"},decls:2,vars:3,consts:[["class","card",4,"ngIf"],[1,"card"],[1,"details__basic"],[1,"details__image",3,"src","alt"],[1,"basic__info"],[1,"group__title"],[4,"ngIf"],["class","group__title",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"details__trailer"],["suggestedQuality","highres",3,"videoId","height","width"]],template:function(n,a){1&n&&(t.YNc(0,Ne,26,13,"mat-card",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,a.anime$))},dependencies:[p.sg,p.O5,st,Y.a8,Y.C1,Y.dn,Y.n5,Y.$j,p.Ov,p.uU],styles:[".details__image[_ngcontent-%COMP%]{width:300px;display:block}.group__title[_ngcontent-%COMP%]{font-weight:700;font-size:larger}.card[_ngcontent-%COMP%]{padding:10px 40px}.details__basic[_ngcontent-%COMP%]{display:flex}.basic__info[_ngcontent-%COMP%]{margin:0 10px}.details__trailer[_ngcontent-%COMP%]{display:flex;justify-content:center}"],changeDetection:0}),e})();function Qe(e,i){1&e&&t._UZ(0,"camp-anime-details",1),2&e&&t.Q6J("animeId",i.ngIf)}const Fe=[{path:"",title:"Anime list",component:Ce},{path:":id",title:"Anime",component:(()=>{class e{constructor(n){this.animeId$=n.paramMap.pipe((0,v.U)(a=>parseInt(a.get("id")??"",10)))}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(C.gz))},e.\u0275cmp=t.Xpm({type:e,selectors:[["camp-anime-page"]],decls:2,vars:3,consts:[[3,"animeId",4,"ngIf"],[3,"animeId"]],template:function(n,a){1&n&&(t.YNc(0,Qe,1,1,"camp-anime-details",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,a.animeId$))},dependencies:[p.O5,Ee,p.Ov],styles:[".anime-table[_ngcontent-%COMP%]{display:block;padding:0 40px}"],changeDetection:0}),e})(),canActivate:[Bt]}];let Oe=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[p.ez,Vt.m,Ot,$t.q,C.Bz.forChild(Fe)]}),e})()}}]);