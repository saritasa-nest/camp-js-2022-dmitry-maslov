"use strict";(self.webpackChunkangular=self.webpackChunkangular||[]).push([[843],{7843:(Be,q,o)=>{o.r(q),o.d(q,{AnimeModule:()=>Ve});var g=o(8692),C=o(2864),t=o(4537),D=o(8023),h=o(4121),Z=o(4945),Y=o(7241),E=o(5975),tt=o(2692);function et(e,i,n){return n?et(e,i).pipe((0,tt.Z)(n)):new Y.y(a=>{const r=(...l)=>a.next(1===l.length?l[0]:l),s=e(r);return(0,E.m)(i)?()=>i(r,s):void 0})}var _=o(5696),F=o(7824),ft=o(1860),nt=o(5598),Q=o(1927),I=o(8168),O=o(3528),yt=o(561),_t=o(985),L=o(2085);const vt={connector:()=>new D.x};function it(e,i=vt){const{connector:n}=i;return(0,L.e)((a,r)=>{const s=n();(0,_t.D)(e(function Tt(e){return new Y.y(i=>e.subscribe(i))}(s))).subscribe(r),r.add(a.subscribe(s))})}var V=o(1528),xt=o(4882),B=o(8499),St=o(5955),Pt=o(8330),Ct=o(408),at=o(6651);function J(...e){const i=(0,at.jO)(e);return(0,L.e)((n,a)=>{const r=e.length,s=new Array(r);let l=e.map(()=>!1),u=!1;for(let m=0;m<r;m++)(0,St.Xf)(e[m]).subscribe(new B.Q(a,y=>{s[m]=y,!u&&!l[m]&&(l[m]=!0,(u=l.every(Pt.y))&&(l=null))},Ct.Z));n.subscribe(new B.Q(a,m=>{if(u){const y=[m,...s];a.next(i?i(...y):y)}}))})}var T=o(7969),Dt=o(7479),Zt=o(2147),It=o(697);function rt(...e){const i=(0,at.jO)(e);return i?(0,F.z)(rt(...e),(0,tt.Z)(i)):(0,L.e)((n,a)=>{(0,_.l)([n,...(0,It.k)(e)])(a)})}var wt=o(4970);const Rt=["youtubeContainer"];let lt=(()=>{class e{constructor(n,a){this._ngZone=n,this._youtubeContainer=new D.x,this._destroyed=new D.x,this._playerChanges=new h.X(void 0),this._videoId=new h.X(void 0),this._height=new h.X(390),this._width=new h.X(640),this._startSeconds=new h.X(void 0),this._endSeconds=new h.X(void 0),this._suggestedQuality=new h.X(void 0),this._playerVars=new h.X(void 0),this.ready=this._getLazyEmitter("onReady"),this.stateChange=this._getLazyEmitter("onStateChange"),this.error=this._getLazyEmitter("onError"),this.apiChange=this._getLazyEmitter("onApiChange"),this.playbackQualityChange=this._getLazyEmitter("onPlaybackQualityChange"),this.playbackRateChange=this._getLazyEmitter("onPlaybackRateChange"),this._isBrowser=(0,g.NF)(a)}get videoId(){return this._videoId.value}set videoId(n){this._videoId.next(n)}get height(){return this._height.value}set height(n){this._height.next(n||390)}get width(){return this._width.value}set width(n){this._width.next(n||640)}set startSeconds(n){this._startSeconds.next(n)}set endSeconds(n){this._endSeconds.next(n)}set suggestedQuality(n){this._suggestedQuality.next(n)}get playerVars(){return this._playerVars.value}set playerVars(n){this._playerVars.next(n)}ngOnInit(){if(!this._isBrowser)return;let n=(0,Z.of)(!0);if(!window.YT||!window.YT.Player){const r=new D.x;this._existingApiReadyCallback=window.onYouTubeIframeAPIReady,window.onYouTubeIframeAPIReady=()=>{this._existingApiReadyCallback&&this._existingApiReadyCallback(),this._ngZone.run(()=>r.next(!0))},n=r.pipe((0,nt.q)(1),(0,Q.O)(!1))}const a=function Nt(e,i,n,a,r,s,l){const u=(0,_.a)([i,s]).pipe(J((0,_.a)([a,r])),(0,T.U)(([m,y])=>{const[d,p]=m,[P,W]=y;return d?{videoId:d,playerVars:p,width:P,height:W}:void 0}));return(0,_.a)([e,u,(0,Z.of)(l)]).pipe(function Et(e){return(0,F.z)(rt(e),function Ut(e){return(0,L.e)((i,n)=>{let a=!1,r=0;i.subscribe(new B.Q(n,s=>(a||(a=!e(s,r++)))&&n.next(s)))})}(([i,n])=>!n),(0,T.U)(([i])=>i))}(n),(0,Dt.R)(Ft,void 0),(0,Zt.x)())}(this._youtubeContainer,this._videoId,n,this._width,this._height,this._playerVars,this._ngZone).pipe((0,I.b)(r=>{this._playerChanges.next(r)}),function Mt(e){return(0,xt.z)(i=>i?ct(i)?(0,Z.of)(i):new Y.y(n=>{let a=!1,r=!1;const s=l=>{r=!0,a||(l.target.removeEventListener("onReady",s),n.next(l.target))};return i.addEventListener("onReady",s),()=>{a=!0,r||e(i)}}).pipe((0,nt.q)(1),(0,Q.O)(void 0)):(0,Z.of)(void 0))}(r=>{ct(r)||r.destroy()}),(0,O.R)(this._destroyed),function bt(e){return e?i=>it(e)(i):i=>function At(e,i){const n=(0,E.m)(e)?e:()=>e;return(0,E.m)(i)?it(i,{connector:n}):a=>new yt.c(a,n)}(new D.x)(i)}());a.subscribe(r=>{this._player=r,r&&this._pendingPlayerState&&this._initializePlayer(r,this._pendingPlayerState),this._pendingPlayerState=void 0}),function Yt(e,i,n){(0,_.a)([e,i,n]).subscribe(([a,r,s])=>a&&a.setSize(r,s))}(a,this._width,this._height),function Lt(e,i){(0,_.a)([e,i]).subscribe(([n,a])=>n&&a&&n.setPlaybackQuality(a))}(a,this._suggestedQuality),function Qt(e,i,n,a,r,s){const l=(0,_.a)([n,a]).pipe((0,T.U)(([d,p])=>({startSeconds:d,endSeconds:p}))),u=l.pipe(k(e,d=>!!d&&!function Ot(e){const i=e.getPlayerState();return i!==YT.PlayerState.UNSTARTED&&i!==YT.PlayerState.CUED}(d))),m=i.pipe(k(e,(d,p)=>!!d&&d.videoId!==p)),y=e.pipe(k((0,_.a)([i,l]),([d,p],P)=>!(!P||d==P.videoId&&!p.startSeconds&&!p.endSeconds)));(0,ft.T)(y,m,u).pipe(J((0,_.a)([e,i,l,r])),(0,T.U)(([d,p])=>p),(0,O.R)(s)).subscribe(([d,p,P,W])=>{!p||!d||(d.videoId=p,d.cueVideoById({videoId:p,suggestedQuality:W,...P}))})}(a,this._videoId,this._startSeconds,this._endSeconds,this._suggestedQuality,this._destroyed),a.connect()}ngAfterViewInit(){this._youtubeContainer.next(this.youtubeContainer.nativeElement)}ngOnDestroy(){this._player&&(this._player.destroy(),window.onYouTubeIframeAPIReady=this._existingApiReadyCallback),this._playerChanges.complete(),this._videoId.complete(),this._height.complete(),this._width.complete(),this._startSeconds.complete(),this._endSeconds.complete(),this._suggestedQuality.complete(),this._youtubeContainer.complete(),this._playerVars.complete(),this._destroyed.next(),this._destroyed.complete()}playVideo(){this._player?this._player.playVideo():this._getPendingState().playbackState=YT.PlayerState.PLAYING}pauseVideo(){this._player?this._player.pauseVideo():this._getPendingState().playbackState=YT.PlayerState.PAUSED}stopVideo(){this._player?this._player.stopVideo():this._getPendingState().playbackState=YT.PlayerState.CUED}seekTo(n,a){this._player?this._player.seekTo(n,a):this._getPendingState().seek={seconds:n,allowSeekAhead:a}}mute(){this._player?this._player.mute():this._getPendingState().muted=!0}unMute(){this._player?this._player.unMute():this._getPendingState().muted=!1}isMuted(){return this._player?this._player.isMuted():!!this._pendingPlayerState&&!!this._pendingPlayerState.muted}setVolume(n){this._player?this._player.setVolume(n):this._getPendingState().volume=n}getVolume(){return this._player?this._player.getVolume():this._pendingPlayerState&&null!=this._pendingPlayerState.volume?this._pendingPlayerState.volume:0}setPlaybackRate(n){if(this._player)return this._player.setPlaybackRate(n);this._getPendingState().playbackRate=n}getPlaybackRate(){return this._player?this._player.getPlaybackRate():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackRate?this._pendingPlayerState.playbackRate:0}getAvailablePlaybackRates(){return this._player?this._player.getAvailablePlaybackRates():[]}getVideoLoadedFraction(){return this._player?this._player.getVideoLoadedFraction():0}getPlayerState(){if(this._isBrowser&&window.YT)return this._player?this._player.getPlayerState():this._pendingPlayerState&&null!=this._pendingPlayerState.playbackState?this._pendingPlayerState.playbackState:YT.PlayerState.UNSTARTED}getCurrentTime(){return this._player?this._player.getCurrentTime():this._pendingPlayerState&&this._pendingPlayerState.seek?this._pendingPlayerState.seek.seconds:0}getPlaybackQuality(){return this._player?this._player.getPlaybackQuality():"default"}getAvailableQualityLevels(){return this._player?this._player.getAvailableQualityLevels():[]}getDuration(){return this._player?this._player.getDuration():0}getVideoUrl(){return this._player?this._player.getVideoUrl():""}getVideoEmbedCode(){return this._player?this._player.getVideoEmbedCode():""}_getPendingState(){return this._pendingPlayerState||(this._pendingPlayerState={}),this._pendingPlayerState}_initializePlayer(n,a){const{playbackState:r,playbackRate:s,volume:l,muted:u,seek:m}=a;switch(r){case YT.PlayerState.PLAYING:n.playVideo();break;case YT.PlayerState.PAUSED:n.pauseVideo();break;case YT.PlayerState.CUED:n.stopVideo()}null!=s&&n.setPlaybackRate(s),null!=l&&n.setVolume(l),null!=u&&(u?n.mute():n.unMute()),null!=m&&n.seekTo(m.seconds,m.allowSeekAhead)}_getLazyEmitter(n){return this._playerChanges.pipe((0,V.w)(a=>a?et(r=>{a.addEventListener(n,r)},r=>{try{a.removeEventListener&&a.removeEventListener(n,r)}catch{}}):(0,Z.of)()),a=>new Y.y(r=>a.subscribe({next:s=>this._ngZone.run(()=>r.next(s)),error:s=>r.error(s),complete:()=>r.complete()})),(0,O.R)(this._destroyed))}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(t.R0b),t.Y36(t.Lbi))},e.\u0275cmp=t.Xpm({type:e,selectors:[["youtube-player"]],viewQuery:function(n,a){if(1&n&&t.Gf(Rt,5),2&n){let r;t.iGM(r=t.CRH())&&(a.youtubeContainer=r.first)}},inputs:{videoId:"videoId",height:"height",width:"width",startSeconds:"startSeconds",endSeconds:"endSeconds",suggestedQuality:"suggestedQuality",playerVars:"playerVars",showBeforeIframeApiLoads:"showBeforeIframeApiLoads"},outputs:{ready:"ready",stateChange:"stateChange",error:"error",apiChange:"apiChange",playbackQualityChange:"playbackQualityChange",playbackRateChange:"playbackRateChange"},decls:2,vars:0,consts:[["youtubeContainer",""]],template:function(n,a){1&n&&t._UZ(0,"div",null,0)},encapsulation:2,changeDetection:0}),e})();function Ft(e,[i,n,a]){if(e&&n&&e.playerVars!==n.playerVars)e.destroy();else{if(!n)return void(e&&e.destroy());if(e)return e}const r=a.runOutsideAngular(()=>new YT.Player(i,n));return r.videoId=n.videoId,r.playerVars=n.playerVars,r}function ct(e){return"getPlayerStatus"in e}function k(e,i){return(0,F.z)(J(e),(0,wt.h)(([n,a])=>i(a,n)),(0,T.U)(([n])=>n))}let Vt=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({}),e})();var Bt=o(2355),dt=o(9676),Jt=o(4325);let kt=(()=>{class e{constructor(n,a){this.userService=n,this.router=a}canActivate(n,a){return this.canNavigate(a)}canNavigate(n){return this.userService.isAuthorized$.pipe((0,T.U)(a=>!!a||(this.userService.setReturnUrl(n.url),this.router.parseUrl("auth"))),(0,dt.P)())}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(Jt.K),t.LFG(C.F0))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var $t=o(3101),zt=o(4762),c=(()=>{return(e=c||(c={})).TV="TV",e.OVA="OVA",e.Movie="MOVIE",e.Special="SPECIAL",e.ONA="ONA",e.Music="MUSIC",e.Unknown="UNKNOWN",c;var e})();!function(e){const i={[e.TV]:"TV",[e.OVA]:"OVA",[e.Movie]:"Movie",[e.Special]:"Special",[e.ONA]:"ONA",[e.Music]:"Music",[e.Unknown]:"Unknown"};e.toReadable=function n(s){return i[s]},e.toAnimeType=function a(s){return i[s]?s:e.Unknown},e.fromReadableToAnimeType=function r(s){for(const l in i)if(s===i[l])return l;return e.Unknown}}(c||(c={}));var A=(()=>{return(e=A||(A={})).Airing="AIRING",e.Finished="FINISHED",e.NotYetAired="NOT_YET_AIRED",e.Unknown="unknown",A;var e})();!function(e){const i={[e.Airing]:"Airing",[e.Finished]:"Finished",[e.NotYetAired]:"Not yet aired",[e.Unknown]:"Unknown"};e.toReadable=function n(r){return i[r]},e.toAnimeStatus=function a(r){return i[r]?r:e.Unknown}}(A||(A={}));var M=(()=>{return(e=M||(M={})).Id="id",e.TitleEng="title_eng",e.TitleJpn="title_jpn",e.Synopsis="synopsis",e.Status="status",e.Source="source",e.Rating="rating",e.Aired="aired",e.AiredStart="aired__startswith",e.AiredEnd="aired__endswith",e.Created="created",e.Modified="modified",M;var e})();const mt="MMM yyyy";var $,z,j,G,N,X,H,K,jt=o(1588),Gt=o(3151),ut=o(8609),b=o(92),U=o(8635);class Xt extends U.o{constructor(i){super(),this.items=i.items,this.total=i.total}}($||($={})).fromDto=function i({dto:n,resultMapper:a}){return new Xt({total:n.count,items:n.results.map(r=>a(r))})};class Ht extends U.o{constructor(i){super(),this.id=i.id,this.image=i.image,this.titleEng=i.titleEng,this.titleJpn=i.titleJpn,this.airedStart=i.airedStart,this.type=i.type,this.status=i.status}}class Kt extends U.o{constructor(i){super(),this.id=i.id,this.airing=i.airing,this.image=i.image,this.titleEng=i.titleEng,this.titleJpn=i.titleJpn,this.airedRange=i.airedRange,this.type=i.type,this.status=i.status,this.synopsis=i.synopsis,this.genres=i.genres,this.studios=i.studios,this.youTubeTrailerId=i.youTubeTrailerId}}class Wt extends U.o{constructor(i){super(),this.id=i.id,this.name=i.name}}(z||(z={})).fromDto=function i(n){return new Wt({id:n.id,name:n.name})};class qt extends U.o{constructor(i){super(),this.id=i.id,this.name=i.name}}!function(e){e.fromDto=function i(n){return new qt({id:n.id,name:n.name})}}(j||(j={})),function(e){e.toDto=function i(a){return{end:a.end,start:a.start}},e.fromDto=function n(a){return{end:a.end,start:a.start}}}(G||(G={})),function(e){e.fromDtoToAnimeBase=function i(a){return new Ht({id:a.id,image:a.image,titleEng:a.title_eng,titleJpn:a.title_jpn,airedStart:a.aired.start?new Date(a.aired.start):null,type:c.toAnimeType(a.type),status:a.status})},e.fromDtoToAnime=function n(a){return new Kt({airing:a.airing,id:a.id,image:a.image,titleEng:a.title_eng,titleJpn:a.title_jpn,airedRange:G.fromDto(a.aired),type:c.toAnimeType(a.type),status:a.status,synopsis:a.synopsis,studios:a.studios_data.map(r=>z.fromDto(r)),genres:a.genres_data.map(r=>j.fromDto(r)),youTubeTrailerId:a.trailer_youtube_id})}}(N||(N={})),function(e){e.toDto=function i(n){return{limit:n.limit,offset:n.page*n.limit-n.limit}}}(X||(X={})),function(e){e.filterTypeToDto=function i(n){return`${n.join(",")}`}}(H||(H={})),function(e){e.toDto=function i(n){return""===n.direction?"id":"desc"===n.direction?`-${n.sortBy}`:n.sortBy}}(K||(K={}));var te=o(5893),ee=o(5732);let pt=(()=>{class e{constructor(n,a){this.httpClient=a,this.animeUrl=new URL("anime/anime/",n.apiUrl)}getAnime(n){return this.httpClient.get(`${this.animeUrl.toString()}${n}/`).pipe((0,T.U)(a=>N.fromDtoToAnime(a)))}getPaginatedAnimeList({sortParams:n,paginationParams:a,filterParams:r}){const{offset:s,limit:l}=X.toDto(a);return this.httpClient.get(this.animeUrl.toString(),{params:{[w.offset]:s,[w.limit]:l,[w.order]:K.toDto(n),[w.search]:r.search,[w.typeIn]:H.filterTypeToDto(r.type)}}).pipe((0,T.U)(u=>$.fromDto({dto:u,resultMapper:N.fromDtoToAnimeBase})))}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(te._),t.LFG(ee.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const w={offset:"offset",limit:"limit",order:"ordering",search:"search",typeIn:"type__in"};var gt=o(8659),ne=o(8033),ie=o(1379),v=o(317),ae=o(2080),re=o(827),ht=o(6558),oe=o(9665);function se(e,i){1&e&&t._UZ(0,"mat-progress-bar",2)}function le(e,i){if(1&e&&(t.TgZ(0,"mat-option",9),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.Q6J("value",n.key),t.xp6(1),t.hij(" ",n.value," ")}}function ce(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"mat-paginator",10),t.NdJ("page",function(r){t.CHM(n);const s=t.oxw(2);return t.KtG(s.handlePaginationChange(r))}),t.ALo(1,"async"),t.qZA()}if(2&e){const n=i.ngIf,a=t.oxw().ngIf,r=t.oxw();t.Q6J("length",a.total)("pageSizeOptions",r.pageSizeOptions)("pageSize",t.lcZ(1,4,r.paginationLimit$))("pageIndex",n-1)}}function de(e,i){1&e&&(t.TgZ(0,"th",23),t._uU(1,"Image"),t.qZA())}function me(e,i){if(1&e&&(t.TgZ(0,"td",24),t._UZ(1,"img",25),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.Q6J("src",n.image,t.LSH)}}function ue(e,i){if(1&e&&(t.TgZ(0,"th",26),t._uU(1," Eng Title "),t.qZA()),2&e){const n=t.oxw(3);t.Q6J("mat-sort-header",n.sortedFields.TitleEng)}}function pe(e,i){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.Oqu(n.titleEng)}}function ge(e,i){1&e&&(t.TgZ(0,"th",23),t._uU(1,"Jpn Title"),t.qZA())}function he(e,i){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.Oqu(n.titleJpn)}}function fe(e,i){if(1&e&&(t.TgZ(0,"th",26),t._uU(1," Aired start "),t.qZA()),2&e){const n=t.oxw(3);t.Q6J("mat-sort-header",n.sortedFields.AiredStart)}}function ye(e,i){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const n=i.$implicit,a=t.oxw(3);t.xp6(1),t.hij(" ",t.xi3(2,1,n.airedStart,a.monthYearFormat)||"Not started"," ")}}function _e(e,i){1&e&&(t.TgZ(0,"th",23),t._uU(1,"Type"),t.qZA())}function Te(e,i){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){const n=i.$implicit,a=t.oxw(3);t.xp6(1),t.hij(" ",a.animeType.toReadable(n.type)," ")}}function ve(e,i){if(1&e&&(t.TgZ(0,"th",26),t._uU(1," Status "),t.qZA()),2&e){const n=t.oxw(3);t.Q6J("mat-sort-header",n.sortedFields.Status)}}function Ae(e,i){if(1&e&&(t.TgZ(0,"td",24),t._uU(1),t.qZA()),2&e){const n=i.$implicit,a=t.oxw(3);t.xp6(1),t.hij(" ",a.animeStatus.toReadable(n.status)," ")}}function be(e,i){1&e&&t._UZ(0,"tr",27)}function xe(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"tr",28),t.NdJ("click",function(){const s=t.CHM(n).$implicit,l=t.oxw(3);return t.KtG(l.onAnimeClick(s.id))}),t.qZA()}}function Se(e,i){if(1&e){const n=t.EpF();t.TgZ(0,"table",11),t.NdJ("matSortChange",function(r){t.CHM(n);const s=t.oxw(2);return t.KtG(s.handleSortChange(r))}),t.ynx(1,12),t.YNc(2,de,2,0,"th",13),t.YNc(3,me,2,1,"td",14),t.BQk(),t.ynx(4,15),t.YNc(5,ue,2,1,"th",16),t.YNc(6,pe,2,1,"td",14),t.BQk(),t.ynx(7,17),t.YNc(8,ge,2,0,"th",13),t.YNc(9,he,2,1,"td",14),t.BQk(),t.ynx(10,18),t.YNc(11,fe,2,1,"th",16),t.YNc(12,ye,3,4,"td",14),t.BQk(),t.ynx(13,19),t.YNc(14,_e,2,0,"th",13),t.YNc(15,Te,2,1,"td",14),t.BQk(),t.ynx(16,20),t.YNc(17,ve,2,1,"th",16),t.YNc(18,Ae,2,1,"td",14),t.BQk(),t.YNc(19,be,1,0,"tr",21),t.YNc(20,xe,1,0,"tr",22),t.qZA()}if(2&e){const n=i.ngIf,a=t.oxw().ngIf,r=t.oxw();t.Q6J("dataSource",a.items)("trackBy",r.trackById)("matSortDirection",n.direction)("matSortActive",n.sortBy),t.xp6(19),t.Q6J("matHeaderRowDef",r.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",r.displayedColumns)}}function Pe(e,i){if(1&e&&(t.TgZ(0,"div")(1,"form",3)(2,"mat-form-field")(3,"mat-label"),t._uU(4,"Search"),t.qZA(),t._UZ(5,"input",4),t.qZA(),t.TgZ(6,"mat-form-field")(7,"mat-label"),t._uU(8,"Filter type"),t.qZA(),t.TgZ(9,"mat-select",5),t.YNc(10,le,2,2,"mat-option",6),t.ALo(11,"keyvalue"),t.qZA()()(),t.YNc(12,ce,2,6,"mat-paginator",7),t.ALo(13,"async"),t.YNc(14,Se,21,6,"table",8),t.ALo(15,"async"),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Q6J("formGroup",n.filterForms),t.xp6(8),t.Q6J("multiple",!0),t.xp6(1),t.Q6J("ngForOf",t.lcZ(11,5,n.filterOptionsMap.type)),t.xp6(2),t.Q6J("ngIf",t.lcZ(13,7,n.paginationPage$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(15,9,n.sortParams$))}}const S_paginationParams_page=1,S_paginationParams_limit=10,S_sortParams_direction="",S_sortParams_sortBy="";let x=class{constructor(i,n,a,r){this.formBuilder=i,this.router=n,this.route=a,this.monthYearFormat=mt,this.animeType=c,this.animeStatus=A,this.isLoading$=new h.X(!0),this.sortedFields=M,this.pageSizeOptions=[5,10,15,20],this.displayedColumns=["image","titleEng","titleJpn","airedStart","type","status"],this.filterOptionsMap={type:{[c.Movie]:c.toReadable(c.Movie),[c.TV]:c.toReadable(c.TV),[c.OVA]:c.toReadable(c.OVA),[c.ONA]:c.toReadable(c.ONA),[c.Special]:c.toReadable(c.Special),[c.Music]:c.toReadable(c.Music),[c.Unknown]:c.toReadable(c.Unknown)}},this.paginationLimit$=new h.X(S_paginationParams_limit),this.paginationPage$=new h.X(S_paginationParams_page),this.sortParams$=new h.X({direction:"",sortBy:""}),this.filterForms=this.formBuilder.nonNullable.group({search:"",type:[]}),this.setInitialParams();const s=this.filterForms.valueChanges.pipe((0,I.b)(()=>this.resetPagination()),(0,jt.T)(1),(0,Q.O)(this.filterForms.value),(0,T.U)(({search:l,type:u})=>({search:l??"",type:u??[]})));this.paginatedAnimeList$=(0,_.a)([this.paginationPage$,this.paginationLimit$,this.sortParams$,s]).pipe((0,Gt.b)(300),(0,I.b)(()=>this.isLoading$.next(!0)),(0,V.w)(([l,u,m,y])=>{const d={page:l,limit:u};return this.updateQueryParams({paginationParams:d,filterParams:y,sortParams:m}),r.getPaginatedAnimeList({paginationParams:d,sortParams:m,filterParams:y}).pipe((0,I.b)(()=>this.isLoading$.next(!1)))}))}onAnimeClick(i){this.router.navigate(["anime",i])}handleSortChange(i){this.sortParams$.next({direction:i.direction,sortBy:i.active}),this.resetPagination()}handlePaginationChange(i){this.paginationLimit$.next(i.pageSize),this.paginationPage$.next(i.pageIndex+1)}trackById(i,n){return n.id}resetPagination(){this.paginationPage$.next(1)}updateQueryParams({paginationParams:i,filterParams:n,sortParams:a}){this.router.navigate([],{queryParams:{limit:i.limit,page:i.page,search:n.search??null,sortBy:a.direction?a.sortBy:null,direction:a.direction??null,type:n.type.map(r=>c.toReadable(r))??null},queryParamsHandling:"merge"})}getSortParamsFromQuery(i){return{direction:i.direction??S_sortParams_direction,sortBy:i.sortBy??S_sortParams_sortBy}}getPaginationParamsFromQuery(i){return{limit:i.limit??S_paginationParams_limit,page:i.page??S_paginationParams_page}}getFilterParamsFromQuery(i){const n=i.type,a=[];return"string"==typeof n?a.push(c.fromReadableToAnimeType(n)):n instanceof Array&&n.forEach(r=>a.push(c.fromReadableToAnimeType(r))),{search:i.search??"",type:a}}setInitialParams(){this.route.queryParams.pipe((0,dt.P)(),(0,I.b)(i=>{this.setInitialParamsFromQuery(i)}),(0,ut.t)(this)).subscribe()}setInitialParamsFromQuery(i){const n=this.getPaginationParamsFromQuery(i);this.paginationPage$.next(n.page),this.paginationLimit$.next(n.limit),this.sortParams$.next(this.getSortParamsFromQuery(i)),this.filterForms.setValue(this.getFilterParamsFromQuery(i))}};x.\u0275fac=function(i){return new(i||x)(t.Y36(b.qu),t.Y36(C.F0),t.Y36(C.gz),t.Y36(pt))},x.\u0275cmp=t.Xpm({type:x,selectors:[["camp-anime-table"]],decls:4,vars:6,consts:[["mode","indeterminate",4,"ngIf"],[4,"ngIf"],["mode","indeterminate"],[3,"formGroup"],["matInput","","placeholder","Naruto","formControlName","search"],["formControlName","type",3,"multiple"],[3,"value",4,"ngFor","ngForOf"],["showFirstLastButtons","","aria-label","Pagination panel",3,"length","pageSizeOptions","pageSize","pageIndex","page",4,"ngIf"],["mat-table","","class","table mat-elevation-z8","aria-label","Anime Table","matSort","",3,"dataSource","trackBy","matSortDirection","matSortActive","matSortChange",4,"ngIf"],[3,"value"],["showFirstLastButtons","","aria-label","Pagination panel",3,"length","pageSizeOptions","pageSize","pageIndex","page"],["mat-table","","aria-label","Anime Table","matSort","",1,"table","mat-elevation-z8",3,"dataSource","trackBy","matSortDirection","matSortActive","matSortChange"],["matColumnDef","image"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","titleEng"],["mat-header-cell","",3,"mat-sort-header",4,"matHeaderCellDef"],["matColumnDef","titleJpn"],["matColumnDef","airedStart"],["matColumnDef","type"],["matColumnDef","status"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["alt","",1,"anime-image",3,"src"],["mat-header-cell","",3,"mat-sort-header"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(i,n){1&i&&(t.YNc(0,se,1,0,"mat-progress-bar",0),t.ALo(1,"async"),t.YNc(2,Pe,16,11,"div",1),t.ALo(3,"async")),2&i&&(t.Q6J("ngIf",t.lcZ(1,2,n.isLoading$)),t.xp6(2),t.Q6J("ngIf",t.lcZ(3,4,n.paginatedAnimeList$)))},dependencies:[g.sg,g.O5,b._Y,b.Fj,b.JJ,b.JL,b.sg,b.u,gt.KE,gt.hX,ne.gD,ie.ey,v.BZ,v.fO,v.as,v.w1,v.Dz,v.nj,v.ge,v.ev,v.XQ,v.Gk,ae.NW,re.pW,ht.YE,ht.nU,oe.Nt,g.Ov,g.uU,g.Nd],styles:[".table[_ngcontent-%COMP%]{width:100%}.anime-image[_ngcontent-%COMP%]{max-width:150px;max-height:150px}"],changeDetection:0}),x=(0,zt.gn)([(0,ut.V)()],x);let De=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["camp-anime-list-page"]],decls:1,vars:0,consts:[[1,"anime-table"]],template:function(n,a){1&n&&t._UZ(0,"camp-anime-table",0)},dependencies:[x],styles:["[_nghost-%COMP%]{display:block}.anime-table[_ngcontent-%COMP%]{padding:0 40px}"],changeDetection:0}),e})();function Ze(e,i){return i.id}let Ie=(()=>{class e{constructor(n){this.document=n}initYouTubePlayer(){void 0===this.youTubeApiTag&&(this.youTubeApiTag=document.createElement("script"),this.youTubeApiTag.src="https://www.youtube.com/iframe_api",this.document.body.appendChild(this.youTubeApiTag))}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(g.K0))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var R=o(1997);function Ue(e,i){if(1&e&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const n=t.oxw(2);t.xp6(1),t.hij(" Start: ",t.xi3(2,1,n.anime.airedRange.start,n.monthYearFormat)," ")}}function we(e,i){if(1&e&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const n=t.oxw(2);t.xp6(1),t.hij(" Finish: ",t.xi3(2,1,n.anime.airedRange.end,n.monthYearFormat)," ")}}function Re(e,i){if(1&e&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",n.name," ")}}function Ye(e,i){if(1&e&&(t.TgZ(0,"mat-card-content")(1,"div",5),t._uU(2,"Studios"),t.qZA(),t.YNc(3,Re,2,1,"div",8),t.qZA()),2&e){const n=t.oxw(2);t.xp6(3),t.Q6J("ngForOf",n.anime.studios)("ngForTrackBy",n.trackById)}}function Le(e,i){if(1&e&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&e){const n=i.$implicit;t.xp6(1),t.hij(" ",n.name," ")}}function Me(e,i){if(1&e&&(t.TgZ(0,"mat-card-content")(1,"div",5),t._uU(2,"Genres"),t.qZA(),t.YNc(3,Le,2,1,"div",8),t.qZA()),2&e){const n=t.oxw(2);t.xp6(3),t.Q6J("ngForOf",n.anime.genres)("ngForTrackBy",n.trackById)}}function Ne(e,i){1&e&&(t.TgZ(0,"div",5),t._uU(1,"Synopsis"),t.qZA())}function Ee(e,i){if(1&e&&(t.TgZ(0,"mat-card-content")(1,"div",5),t._uU(2,"Trailer"),t.qZA(),t.TgZ(3,"div",9),t._UZ(4,"youtube-player",10),t.qZA()()),2&e){const n=t.oxw(2);t.xp6(4),t.Q6J("videoId",n.anime.youTubeTrailerId)("height",480)("width",640)}}function Fe(e,i){if(1&e&&(t.TgZ(0,"mat-card",1)(1,"mat-card-title-group")(2,"mat-card-title"),t._uU(3),t.qZA(),t.TgZ(4,"mat-card-subtitle"),t._uU(5),t.qZA()(),t.TgZ(6,"div",2),t._UZ(7,"img",3),t.TgZ(8,"div",4)(9,"mat-card-content")(10,"div",5),t._uU(11,"Type"),t.qZA(),t._uU(12),t.qZA(),t.TgZ(13,"mat-card-content")(14,"div",5),t._uU(15,"Aired:"),t.qZA(),t.TgZ(16,"div"),t._uU(17),t.qZA(),t.YNc(18,Ue,3,4,"div",6),t.YNc(19,we,3,4,"div",6),t.qZA(),t.YNc(20,Ye,4,2,"mat-card-content",6),t.YNc(21,Me,4,2,"mat-card-content",6),t.qZA()(),t.TgZ(22,"mat-card-content"),t.YNc(23,Ne,2,0,"div",7),t._uU(24),t.qZA(),t.YNc(25,Ee,5,3,"mat-card-content",6),t.qZA()),2&e){const n=t.oxw();t.xp6(3),t.hij(" ",n.anime.titleEng," "),t.xp6(2),t.hij(" ",n.anime.titleJpn," "),t.xp6(2),t.Q6J("src",n.anime.image,t.LSH)("alt","Poster anime - "+n.anime.titleEng),t.xp6(5),t.hij(" ",n.animeType.toReadable(n.anime.type)," "),t.xp6(5),t.hij("Status: ",n.animeStatus.toReadable(n.anime.status),""),t.xp6(1),t.Q6J("ngIf",n.anime.airedRange.start),t.xp6(1),t.Q6J("ngIf",n.anime.airedRange.end),t.xp6(1),t.Q6J("ngIf",n.anime.studios.length>0),t.xp6(1),t.Q6J("ngIf",n.anime.genres.length>0),t.xp6(2),t.Q6J("ngIf",n.anime.synopsis),t.xp6(1),t.hij(" ",n.anime.synopsis," "),t.xp6(1),t.Q6J("ngIf",n.anime.youTubeTrailerId)}}let Qe=(()=>{class e{constructor(n){this.multimediaService=n,this.monthYearFormat=mt,this.animeStatus=A,this.animeType=c,this.anime=null,this.trackById=Ze}ngOnInit(){this.multimediaService.initYouTubePlayer()}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(Ie))},e.\u0275cmp=t.Xpm({type:e,selectors:[["camp-anime-details"]],inputs:{anime:"anime"},decls:1,vars:1,consts:[["class","card",4,"ngIf"],[1,"card"],[1,"card__basic"],[1,"card__image",3,"src","alt"],[1,"card__info"],[1,"group-title"],[4,"ngIf"],["class","group-title",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"card__trailer"],["suggestedQuality","highres",3,"videoId","height","width"]],template:function(n,a){1&n&&t.YNc(0,Fe,26,13,"mat-card",0),2&n&&t.Q6J("ngIf",a.anime)},dependencies:[g.sg,g.O5,lt,R.a8,R.C1,R.dn,R.n5,R.$j,g.uU],styles:[".card__image[_ngcontent-%COMP%]{max-width:300px;min-height:440px;display:block}.group-title[_ngcontent-%COMP%]{font-weight:700;font-size:larger}.card[_ngcontent-%COMP%]{padding:10px 40px}.card__basic[_ngcontent-%COMP%]{display:flex}.card__info[_ngcontent-%COMP%]{margin:0 10px}.card__trailer[_ngcontent-%COMP%]{display:flex;justify-content:center}"],changeDetection:0}),e})();const Oe=[{path:"",title:"Anime list",component:De},{path:":id",title:"Anime",component:(()=>{class e{constructor(n,a){this.anime$=n.paramMap.pipe((0,T.U)(r=>parseInt(r.get("id")??"",10))).pipe((0,V.w)(r=>a.getAnime(r)))}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(C.gz),t.Y36(pt))},e.\u0275cmp=t.Xpm({type:e,selectors:[["camp-anime-page"]],decls:2,vars:3,consts:[[3,"anime"]],template:function(n,a){1&n&&(t._UZ(0,"camp-anime-details",0),t.ALo(1,"async")),2&n&&t.Q6J("anime",t.lcZ(1,1,a.anime$))},dependencies:[Qe,g.Ov],styles:[".anime-table[_ngcontent-%COMP%]{display:block;padding:0 40px}"],changeDetection:0}),e})(),canActivate:[kt]}];let Ve=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[g.ez,Bt.m,Vt,$t.q,C.Bz.forChild(Oe)]}),e})()}}]);